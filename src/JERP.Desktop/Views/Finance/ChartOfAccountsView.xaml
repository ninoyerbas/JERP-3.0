<!--
    JERP 3.0 - Payroll & ERP System
    Copyright (c) 2026 ninoyerbas. All Rights Reserved.
    
    PROPRIETARY AND CONFIDENTIAL
    
    This source code is the confidential and proprietary information of ninoyerbas.
    Unauthorized copying, modification, distribution, or use is strictly prohibited.
    
    For licensing inquiries: licensing@jerp.io
-->

<UserControl x:Class="JERP.Desktop.Views.Finance.ChartOfAccountsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ui="http://schemas.modernwpf.com/2019">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="0,0,0,15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBox Grid.Column="0" Text="{Binding SearchQuery, UpdateSourceTrigger=PropertyChanged}" 
                     ui:ControlHelper.PlaceholderText="Search chart of accounts..." 
                     Height="35" FontSize="14" VerticalContentAlignment="Center" Margin="0,0,10,0">
                <TextBox.InputBindings>
                    <KeyBinding Key="Enter" Command="{Binding PerformSearchCommand}"/>
                </TextBox.InputBindings>
            </TextBox>

            <ComboBox Grid.Column="1" SelectedItem="{Binding SelectedAccountType}" 
                      ItemsSource="{Binding AccountTypeOptions}"
                      Height="35" FontSize="14" VerticalContentAlignment="Center" Margin="0,0,10,0"
                      ui:ControlHelper.PlaceholderText="Filter by Account Type"/>

            <StackPanel Grid.Column="2" Orientation="Horizontal">
                <Button Content="New Account" Command="{Binding CreateNewAccountCommand}" 
                        Height="35" MinWidth="120" Margin="0,0,10,0" Style="{StaticResource AccentButtonStyle}"/>
                <Button Content="Refresh" Command="{Binding RefreshDataCommand}" 
                        Height="35" MinWidth="80"/>
            </StackPanel>
        </Grid>

        <DataGrid Grid.Row="1" ItemsSource="{Binding AccountsList}" 
                  SelectedItem="{Binding CurrentSelectedAccount}"
                  AutoGenerateColumns="False" 
                  CanUserAddRows="False" CanUserDeleteRows="False"
                  IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Account Number" Binding="{Binding AccountNumber}" Width="140"/>
                <DataGridTextColumn Header="Account Name" Binding="{Binding AccountName}" Width="250"/>
                <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="150"/>
                <DataGridTextColumn Header="Balance" Binding="{Binding Balance, StringFormat=C}" Width="150"/>
                <DataGridCheckBoxColumn Header="Active" Binding="{Binding IsActive}" Width="80"/>
                <DataGridTemplateColumn Header="Actions" Width="200">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Button Content="Edit" Command="{Binding DataContext.ModifyAccountCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}" 
                                        CommandParameter="{Binding}" Margin="0,0,5,0" Padding="10,5"/>
                                <Button Content="View" Command="{Binding DataContext.ViewAccountDetailsCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}" 
                                        CommandParameter="{Binding}" Padding="10,5"/>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,15,0,0">
            <Button Content="Previous" Command="{Binding NavigatePreviousCommand}" 
                    Height="35" MinWidth="100" Margin="0,0,10,0"
                    IsEnabled="{Binding CanNavigatePrevious}"/>
            <TextBlock VerticalAlignment="Center" Margin="10,0" FontSize="14">
                <Run Text="Page"/>
                <Run Text="{Binding ActivePageNumber, Mode=OneWay}"/>
                <Run Text="of"/>
                <Run Text="{Binding TotalPageCount, Mode=OneWay}"/>
            </TextBlock>
            <Button Content="Next" Command="{Binding NavigateNextCommand}" 
                    Height="35" MinWidth="100" Margin="10,0,0,0"
                    IsEnabled="{Binding CanNavigateNext}"/>
        </StackPanel>
    </Grid>
</UserControl>
